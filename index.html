<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzdH-T92c5nc7gPDP6bqvHL78XnWgTuKbqw1o5_qa4oKBuq8iAZxvvUppmN-T0zOXEeUw/exec";

const button = document.getElementById("accept");
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

if (!id) {
  document.body.innerHTML = "<h2>Invalid link</h2>";
}

button.onclick = async function() {
  try {
    button.innerText = "Loading...";
    button.disabled = true;

    const response = await fetch(scriptURL + "?id=" + id);
    const data = await response.json();

    if (data.url) {
      window.location.href = data.url;
    } else {
      document.body.innerHTML = "<h2>Video not found</h2>";
    }

  } catch (error) {
    console.error(error);
    document.body.innerHTML = "<h2>Error loading link</h2>";
  }
};
</script>
