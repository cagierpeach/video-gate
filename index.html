<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzdH-T92c5nc7gPDP6bqvHL78XnWgTuKbqw1o5_qa4oKBuq8iAZxvvUppmN-T0zOXEeUw/exec";

const params = new URLSearchParams(window.location.search);
const id = params.get("id");

if (!id) {
  document.body.innerHTML = "<h2>Invalid link</h2>";
}

document.getElementById("accept").onclick = async function() {
  try {
    const response = await fetch(scriptURL + "?id=" + id);
    const text = await response.text();

    // Extract URL manually
    const match = text.match(/https?:\/\/[^\"]+/);

    if (match) {
      window.location.href = match[0];
    } else {
      document.body.innerHTML = "<h2>Video not found</h2>";
    }

  } catch (error) {
    document.body.innerHTML = "<h2>Error loading video</h2>";
  }
};
</script>
